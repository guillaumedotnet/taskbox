var ce=Object.defineProperty;var ue=(e,n,t)=>n in e?ce(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var $=(e,n,t)=>ue(e,typeof n!="symbol"?n+"":n,t);import{j as x}from"./jsx-runtime-BYYWji4R.js";import{r as le}from"./index-ClcD9ViR.js";import{u as de,a as fe,f as M,T as pe,s as z,P as he,M as me}from"./task-list.stories-C8qm3Yha.js";import{i as ve,d as I,s as ge,c as xe,R as we,t as ye,g as be,F as Ee,n as N,a as Te}from"./decorators-Bnaor6Ku.js";import{w as Ce,a as B,b as q}from"./index-B2JJ_hsE.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./task.stories-Bjnb70ol.js";function X(){const e=de(),{error:n}=fe(t=>t.taskbox);return le.useEffect(()=>{e(M())},[e]),n?x.jsx("div",{className:"w-full max-w-screen-xl mx-auto p-4",children:x.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 bg-gray-50 rounded-lg mt-10 mx-auto max-w-md",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oh no!"}),x.jsx("p",{className:"text-gray-600 text-center",children:"Something went wrong"}),x.jsx("button",{onClick:()=>e(M()),className:"mt-6 inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Try Again"})]})}):x.jsxs("div",{className:"w-full max-w-screen-xl mx-auto p-4",children:[x.jsxs("div",{className:"md:flex md:items-center md:justify-between py-4 px-6 border-b border-gray-200",children:[x.jsx("div",{className:"min-w-0 flex-1",children:x.jsx("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl sm:tracking-tight",children:"Taskbox"})}),x.jsxs("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:[x.jsx("button",{type:"button",className:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Filter"}),x.jsx("button",{type:"button",className:"ml-3 inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Add Task"})]})]}),x.jsx("div",{className:"px-6 py-4",children:x.jsx(pe,{})})]})}X.__docgenInfo={description:"",methods:[],displayName:"InboxScreen"};function Re(){ve(typeof URL<"u",I.formatMessage(`Global "URL" class is not defined. This likely means that you're running MSW in an environment that doesn't support all Node.js standard API (e.g. React Native). If that's the case, please use an appropriate polyfill for the "URL" class, like "react-native-url-polyfill".`))}function Se(e,n){return e.toLowerCase()===n.toLowerCase()}function Pe(e){return e<300?"#69AB32":e<400?"#F0BB4B":"#E95F5D"}async function Oe(e){const t=await e.clone().text();return{url:new URL(e.url),method:e.method,headers:Object.fromEntries(e.headers.entries()),body:t}}const{message:je}=ge;async function Ae(e){const n=e.clone(),t=await n.text(),a=n.status||200,r=n.statusText||je[a]||"OK";return{status:a,statusText:r,headers:Object.fromEntries(n.headers.entries()),body:t}}function ke(e){for(var n=[],t=0;t<e.length;){var a=e[t];if(a==="*"||a==="+"||a==="?"){n.push({type:"MODIFIER",index:t,value:e[t++]});continue}if(a==="\\"){n.push({type:"ESCAPED_CHAR",index:t++,value:e[t++]});continue}if(a==="{"){n.push({type:"OPEN",index:t,value:e[t++]});continue}if(a==="}"){n.push({type:"CLOSE",index:t,value:e[t++]});continue}if(a===":"){for(var r="",i=t+1;i<e.length;){var s=e.charCodeAt(i);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){r+=e[i++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(t));n.push({type:"NAME",index:t,value:r}),t=i;continue}if(a==="("){var f=1,E="",i=t+1;if(e[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<e.length;){if(e[i]==="\\"){E+=e[i++]+e[i++];continue}if(e[i]===")"){if(f--,f===0){i++;break}}else if(e[i]==="("&&(f++,e[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));E+=e[i++]}if(f)throw new TypeError("Unbalanced pattern at ".concat(t));if(!E)throw new TypeError("Missing pattern at ".concat(t));n.push({type:"PATTERN",index:t,value:E}),t=i;continue}n.push({type:"CHAR",index:t,value:e[t++]})}return n.push({type:"END",index:t,value:""}),n}function _e(e,n){n===void 0&&(n={});for(var t=ke(e),a=n.prefixes,r=a===void 0?"./":a,i=n.delimiter,s=i===void 0?"/#?":i,f=[],E=0,b=0,w="",p=function(g){if(b<t.length&&t[b].type===g)return t[b++].value},R=function(g){var m=p(g);if(m!==void 0)return m;var C=t[b],D=C.type,se=C.index;throw new TypeError("Unexpected ".concat(D," at ").concat(se,", expected ").concat(g))},y=function(){for(var g="",m;m=p("CHAR")||p("ESCAPED_CHAR");)g+=m;return g},c=function(g){for(var m=0,C=s;m<C.length;m++){var D=C[m];if(g.indexOf(D)>-1)return!0}return!1},h=function(g){var m=f[f.length-1],C=g||(m&&typeof m=="string"?m:"");if(m&&!C)throw new TypeError('Must have text between two parameters, missing text after "'.concat(m.name,'"'));return!C||c(C)?"[^".concat(_(s),"]+?"):"(?:(?!".concat(_(C),")[^").concat(_(s),"])+?")};b<t.length;){var o=p("CHAR"),d=p("NAME"),S=p("PATTERN");if(d||S){var u=o||"";r.indexOf(u)===-1&&(w+=u,u=""),w&&(f.push(w),w=""),f.push({name:d||E++,prefix:u,suffix:"",pattern:S||h(u),modifier:p("MODIFIER")||""});continue}var l=o||p("ESCAPED_CHAR");if(l){w+=l;continue}w&&(f.push(w),w="");var v=p("OPEN");if(v){var u=y(),T=p("NAME")||"",P=p("PATTERN")||"",O=y();R("CLOSE"),f.push({name:T||(P?E++:""),pattern:T&&!P?h(u):P,prefix:u,suffix:O,modifier:p("MODIFIER")||""});continue}R("END")}return f}function Ne(e,n){var t=[],a=ee(e,t,n);return Ue(a,t,n)}function Ue(e,n,t){t===void 0&&(t={});var a=t.decode,r=a===void 0?function(i){return i}:a;return function(i){var s=e.exec(i);if(!s)return!1;for(var f=s[0],E=s.index,b=Object.create(null),w=function(R){if(s[R]===void 0)return"continue";var y=n[R-1];y.modifier==="*"||y.modifier==="+"?b[y.name]=s[R].split(y.prefix+y.suffix).map(function(c){return r(c,y)}):b[y.name]=r(s[R],y)},p=1;p<s.length;p++)w(p);return{path:f,index:E,params:b}}}function _(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Y(e){return e&&e.sensitive?"":"i"}function Le(e,n){if(!n)return e;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,r=t.exec(e.source);r;)n.push({name:r[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),r=t.exec(e.source);return e}function De(e,n,t){var a=e.map(function(r){return ee(r,n,t).source});return new RegExp("(?:".concat(a.join("|"),")"),Y(t))}function Ie(e,n,t){return $e(_e(e,t),n,t)}function $e(e,n,t){t===void 0&&(t={});for(var a=t.strict,r=a===void 0?!1:a,i=t.start,s=i===void 0?!0:i,f=t.end,E=f===void 0?!0:f,b=t.encode,w=b===void 0?function(m){return m}:b,p=t.delimiter,R=p===void 0?"/#?":p,y=t.endsWith,c=y===void 0?"":y,h="[".concat(_(c),"]|$"),o="[".concat(_(R),"]"),d=s?"^":"",S=0,u=e;S<u.length;S++){var l=u[S];if(typeof l=="string")d+=_(w(l));else{var v=_(w(l.prefix)),T=_(w(l.suffix));if(l.pattern)if(n&&n.push(l),v||T)if(l.modifier==="+"||l.modifier==="*"){var P=l.modifier==="*"?"?":"";d+="(?:".concat(v,"((?:").concat(l.pattern,")(?:").concat(T).concat(v,"(?:").concat(l.pattern,"))*)").concat(T,")").concat(P)}else d+="(?:".concat(v,"(").concat(l.pattern,")").concat(T,")").concat(l.modifier);else{if(l.modifier==="+"||l.modifier==="*")throw new TypeError('Can not repeat "'.concat(l.name,'" without a prefix and suffix'));d+="(".concat(l.pattern,")").concat(l.modifier)}else d+="(?:".concat(v).concat(T,")").concat(l.modifier)}}if(E)r||(d+="".concat(o,"?")),d+=t.endsWith?"(?=".concat(h,")"):"$";else{var O=e[e.length-1],g=typeof O=="string"?o.indexOf(O[O.length-1])>-1:O===void 0;r||(d+="(?:".concat(o,"(?=").concat(h,"))?")),g||(d+="(?=".concat(o,"|").concat(h,")"))}return new RegExp(d,Y(t))}function ee(e,n,t){return e instanceof RegExp?Le(e,n):Array.isArray(e)?De(e,n,t):Ie(e,n,t)}function Me(e,n=!0){return[n&&e.origin,e.pathname].filter(Boolean).join("")}const ze=/[\?|#].*$/g;function Be(e){return new URL(`/${e}`,"http://localhost").searchParams}function te(e){return e.endsWith("?")?e:e.replace(ze,"")}function qe(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}function Fe(e,n){if(qe(e)||e.startsWith("*"))return e;const t=n||typeof location<"u"&&location.href;return t?decodeURI(new URL(encodeURI(e),t).href):e}function He(e,n){if(e instanceof RegExp)return e;const t=Fe(e,n);return te(t)}function We(e){return e.replace(/([:a-zA-Z_-]*)(\*{1,2})+/g,(n,t,a)=>{const r="(.*)";return t?t.startsWith(":")?`${t}${a}`:`${t}${r}`:r}).replace(/([^\/])(:)(?=\d+)/,"$1\\$2").replace(/^([^\/]+)(:)(?=\/\/)/,"$1\\$2")}function Ge(e,n,t){const a=He(n,t),r=typeof a=="string"?We(a):a,i=Me(e),s=Ne(r,{decode:decodeURIComponent})(i),f=s&&s.params||{};return{matches:s!==!1,params:f}}var Ve=Object.create,ne=Object.defineProperty,Je=Object.getOwnPropertyDescriptor,re=Object.getOwnPropertyNames,Qe=Object.getPrototypeOf,Ze=Object.prototype.hasOwnProperty,Ke=(e,n)=>function(){return n||(0,e[re(e)[0]])((n={exports:{}}).exports,n),n.exports},Xe=(e,n,t,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of re(n))!Ze.call(e,r)&&r!==t&&ne(e,r,{get:()=>n[r],enumerable:!(a=Je(n,r))||a.enumerable});return e},Ye=(e,n,t)=>(t=e!=null?Ve(Qe(e)):{},Xe(ne(t,"default",{value:e,enumerable:!0}),e)),et=Ke({"node_modules/cookie/index.js"(e){e.parse=f,e.serialize=w;var n=Object.prototype.toString,t=Object.prototype.hasOwnProperty,a=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,r=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/;function f(c,h){if(typeof c!="string")throw new TypeError("argument str must be a string");var o={},d=c.length;if(d<2)return o;var S=h&&h.decode||p,u=0,l=0,v=0;do{if(l=c.indexOf("=",u),l===-1)break;if(v=c.indexOf(";",u),v===-1)v=d;else if(l>v){u=c.lastIndexOf(";",l-1)+1;continue}var T=E(c,u,l),P=b(c,l,T),O=c.slice(T,P);if(!t.call(o,O)){var g=E(c,l+1,v),m=b(c,v,g);c.charCodeAt(g)===34&&c.charCodeAt(m-1)===34&&(g++,m--);var C=c.slice(g,m);o[O]=y(C,S)}u=v+1}while(u<d);return o}function E(c,h,o){do{var d=c.charCodeAt(h);if(d!==32&&d!==9)return h}while(++h<o);return o}function b(c,h,o){for(;h>o;){var d=c.charCodeAt(--h);if(d!==32&&d!==9)return h+1}return o}function w(c,h,o){var d=o&&o.encode||encodeURIComponent;if(typeof d!="function")throw new TypeError("option encode is invalid");if(!a.test(c))throw new TypeError("argument name is invalid");var S=d(h);if(!r.test(S))throw new TypeError("argument val is invalid");var u=c+"="+S;if(!o)return u;if(o.maxAge!=null){var l=Math.floor(o.maxAge);if(!isFinite(l))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+l}if(o.domain){if(!i.test(o.domain))throw new TypeError("option domain is invalid");u+="; Domain="+o.domain}if(o.path){if(!s.test(o.path))throw new TypeError("option path is invalid");u+="; Path="+o.path}if(o.expires){var v=o.expires;if(!R(v)||isNaN(v.valueOf()))throw new TypeError("option expires is invalid");u+="; Expires="+v.toUTCString()}if(o.httpOnly&&(u+="; HttpOnly"),o.secure&&(u+="; Secure"),o.partitioned&&(u+="; Partitioned"),o.priority){var T=typeof o.priority=="string"?o.priority.toLowerCase():o.priority;switch(T){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(o.sameSite){var P=typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite;switch(P){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return u}function p(c){return c.indexOf("%")!==-1?decodeURIComponent(c):c}function R(c){return n.call(c)==="[object Date]"}function y(c,h){try{return h(c)}catch{return c}}}}),tt=Ye(et()),ae=tt.default;/*! Bundled license information:

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/function ie(e){const n=ae.parse(e),t={};for(const a in n)typeof n[a]<"u"&&(t[a]=n[a]);return t}function F(){return ie(document.cookie)}function nt(e){if(typeof document>"u"||typeof location>"u")return{};switch(e.credentials){case"same-origin":{const n=new URL(e.url);return location.origin===n.origin?F():{}}case"include":return F();default:return{}}}function rt(e){const n=e.headers.get("cookie"),t=n?ie(n):{},a=nt(e);for(const s in a)e.headers.append("cookie",ae.serialize(s,a[s]));const r=xe.getCookiesSync(e.url),i=Object.fromEntries(r.map(s=>[s.key,s.value]));for(const s of r)e.headers.append("cookie",s.toString());return{...a,...i,...t}}var k=(e=>(e.HEAD="HEAD",e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.OPTIONS="OPTIONS",e.DELETE="DELETE",e))(k||{});class at extends we{constructor(n,t,a,r){super({info:{header:`${n} ${t}`,path:t,method:n},resolver:a,options:r}),this.checkRedundantQueryParameters()}checkRedundantQueryParameters(){const{method:n,path:t}=this.info;if(t instanceof RegExp||te(t)===t)return;Be(t).forEach((i,s)=>{}),I.warn(`Found a redundant usage of query parameters in the request handler URL for "${n} ${t}". Please match against a path instead and access query parameters using "new URL(request.url).searchParams" instead. Learn more: https://mswjs.io/docs/recipes/query-parameters`)}async parse(n){var i;const t=new URL(n.request.url),a=Ge(t,this.info.path,(i=n.resolutionContext)==null?void 0:i.baseUrl),r=rt(n.request);return{match:a,cookies:r}}predicate(n){const t=this.matchMethod(n.request.method),a=n.parsedResult.match.matches;return t&&a}matchMethod(n){return this.info.method instanceof RegExp?this.info.method.test(n):Se(this.info.method,n)}extendResolverArgs(n){var t;return{params:((t=n.parsedResult.match)==null?void 0:t.params)||{},cookies:n.parsedResult.cookies}}async log(n){const t=ye(n.request.url),a=await Oe(n.request),r=await Ae(n.response),i=Pe(r.status);console.groupCollapsed(I.formatMessage(`${be()} ${n.request.method} ${t} (%c${r.status} ${r.statusText}%c)`),`color:${i}`,"color:inherit"),console.log("Request",a),console.log("Handler:",this),console.log("Response",r),console.groupEnd()}}function A(e){return(n,t,a={})=>new at(e,n,t,a)}const oe={all:A(/.+/),head:A(k.HEAD),get:A(k.GET),post:A(k.POST),put:A(k.PUT),delete:A(k.DELETE),patch:A(k.PATCH),options:A(k.OPTIONS)},it=Symbol("bodyType");var H,W;class j extends(W=Ee,H=it,W){constructor(t,a){const r=N(a);super(t,r);$(this,H);Te(this,r)}static text(t,a){const r=N(a);return r.headers.has("Content-Type")||r.headers.set("Content-Type","text/plain"),r.headers.has("Content-Length")||r.headers.set("Content-Length",t?new Blob([t]).size.toString():"0"),new j(t,r)}static json(t,a){const r=N(a);r.headers.has("Content-Type")||r.headers.set("Content-Type","application/json");const i=JSON.stringify(t);return r.headers.has("Content-Length")||r.headers.set("Content-Length",i?new Blob([i]).size.toString():"0"),new j(i,r)}static xml(t,a){const r=N(a);return r.headers.has("Content-Type")||r.headers.set("Content-Type","text/xml"),new j(t,r)}static html(t,a){const r=N(a);return r.headers.has("Content-Type")||r.headers.set("Content-Type","text/html"),new j(t,r)}static arrayBuffer(t,a){const r=N(a);return r.headers.has("Content-Type")||r.headers.set("Content-Type","application/octet-stream"),t&&!r.headers.has("Content-Length")&&r.headers.set("Content-Length",t.byteLength.toString()),new j(t,r)}static formData(t,a){return new j(t,N(a))}}Re();const ot=e=>(z.dispatch({type:"taskbox/fetchTasks/pending"}),x.jsx(he,{store:z,children:x.jsx(e,{})})),mt={component:X,title:"InboxScreen",decorators:[ot],tags:["autodocs"]},U={parameters:{msw:{handlers:[oe.get("https://jsonplaceholder.typicode.com/todos?userId=1",()=>j.json(me.tasks))]}},play:async({canvasElement:e})=>{const n=Ce(e);await B(async()=>{await n.findByTestId("success")},{timeout:5e3}),await B(async()=>{const t=await n.findAllByLabelText("pin");await q.click(t[0]),await q.click(t[2])})}},L={parameters:{msw:{handlers:[oe.get("https://jsonplaceholder.typicode.com/todos?userId=1",()=>new j(null,{status:403}))]}}};var G,V,J;U.parameters={...U.parameters,docs:{...(G=U.parameters)==null?void 0:G.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [http.get("https://jsonplaceholder.typicode.com/todos?userId=1", () => {
        return HttpResponse.json(MockedState.tasks);
      })]
    }
  },
  play: async ({
    canvasElement
  }) => {
    const canvas = within(canvasElement);

    // Wait for tasks to appear rather than waiting for loading to disappear
    // This is more reliable since it waits for the actual content we need
    await waitFor(async () => {
      // Wait for task list to be rendered after loading is complete
      await canvas.findByTestId("success");
    }, {
      timeout: 5000
    } // Increase timeout to give more time for the state to update
    );

    // Once tasks are loaded, find and click pin buttons
    await waitFor(async () => {
      // Get all pin buttons and click on the first and third
      const pinButtons = await canvas.findAllByLabelText("pin");
      // Simulates pinning the first task
      await fireEvent.click(pinButtons[0]);
      // Simulates pinning the third task
      await fireEvent.click(pinButtons[2]);
    });
  }
}`,...(J=(V=U.parameters)==null?void 0:V.docs)==null?void 0:J.source}}};var Q,Z,K;L.parameters={...L.parameters,docs:{...(Q=L.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [http.get("https://jsonplaceholder.typicode.com/todos?userId=1", () => {
        return new HttpResponse(null, {
          status: 403
        });
      })]
    }
  }
}`,...(K=(Z=L.parameters)==null?void 0:Z.docs)==null?void 0:K.source}}};const vt=["Default","Error"];export{U as Default,L as Error,vt as __namedExportsOrder,mt as default};
